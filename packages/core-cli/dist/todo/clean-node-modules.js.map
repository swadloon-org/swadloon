{"version":3,"sources":["../../src/todo/clean-node-modules.ts"],"sourcesContent":["import { Flags } from '@oclif/core';\nimport debug from 'debug';\nimport { spawnSync } from 'node:child_process';\n\nimport { getShellForPlatform } from '@newrade/core-node-utils';\n\nimport { BaseCommand } from '../base-command.js';\n\nexport default class CleanNodeModules extends BaseCommand {\n  static description = `find . -name 'node_modules' -type d -prune -print -exec rimraf -rf '{}' \\;`;\n\n  // nvm cache clear\n  // yarn cache clear\n  // npm cache clear --force\n  static examples = [`$ nr resetbranches`];\n\n  static flags = {\n    help: Flags.help({ char: 'h' }),\n  };\n\n  static args = [{ name: 'dir' }];\n\n  async init() {\n    debug.enable('nr:core-cli:*');\n  }\n\n  async run() {\n    spawnSync(`brew upgrade`, {\n      cwd: '.',\n      shell: getShellForPlatform(),\n      stdio: 'inherit',\n      env: process.env,\n    });\n\n    spawnSync(`npm cache clean â€“force`, {\n      cwd: '.',\n      shell: getShellForPlatform(),\n      stdio: 'inherit',\n      env: process.env,\n    });\n\n    spawnSync(`yarn cache clean`, {\n      cwd: '.',\n      shell: getShellForPlatform(),\n      stdio: 'inherit',\n      env: process.env,\n    });\n  }\n}\n"],"names":["CleanNodeModules","BaseCommand","description","examples","flags","help","Flags","char","args","name","init","debug","enable","run","spawnSync","cwd","shell","getShellForPlatform","stdio","env","process"],"mappings":"AAAA;;;;;AAAsB,IAAA,KAAa,WAAb,aAAa,CAAA;AACjB,IAAA,MAAO,kCAAP,OAAO,EAAA;AACC,IAAA,iBAAoB,WAApB,oBAAoB,CAAA;AAEV,IAAA,cAA0B,WAA1B,0BAA0B,CAAA;AAElC,IAAA,cAAoB,WAApB,oBAAoB,CAAA;AAEjC,MAAMA,gBAAgB,SAASC,cAAW,YAAA;IACvD,OAAOC,WAAW,GAAG,CAAC,0EAA0E,CAAC,CAAC;IAElG,kBAAkB;IAClB,mBAAmB;IACnB,0BAA0B;IAC1B,OAAOC,QAAQ,GAAG;QAAC,CAAC,kBAAkB,CAAC;KAAC,CAAC;IAEzC,OAAOC,KAAK,GAAG;QACbC,IAAI,EAAEC,KAAK,MAAA,CAACD,IAAI,CAAC;YAAEE,IAAI,EAAE,GAAG;SAAE,CAAC;KAChC,CAAC;IAEF,OAAOC,IAAI,GAAG;QAAC;YAAEC,IAAI,EAAE,KAAK;SAAE;KAAC,CAAC;IAEhC,MAAMC,IAAI,GAAG;QACXC,MAAK,QAAA,CAACC,MAAM,CAAC,eAAe,CAAC,CAAC;KAC/B;IAED,MAAMC,GAAG,GAAG;QACVC,CAAAA,GAAAA,iBAAS,AAKP,CAAA,UALO,CAAC,CAAC,YAAY,CAAC,EAAE;YACxBC,GAAG,EAAE,GAAG;YACRC,KAAK,EAAEC,CAAAA,GAAAA,cAAmB,AAAE,CAAA,oBAAF,EAAE;YAC5BC,KAAK,EAAE,SAAS;YAChBC,GAAG,EAAEC,OAAO,CAACD,GAAG;SACjB,CAAC,CAAC;QAEHL,CAAAA,GAAAA,iBAAS,AAKP,CAAA,UALO,CAAC,CAAC,wBAAsB,CAAC,EAAE;YAClCC,GAAG,EAAE,GAAG;YACRC,KAAK,EAAEC,CAAAA,GAAAA,cAAmB,AAAE,CAAA,oBAAF,EAAE;YAC5BC,KAAK,EAAE,SAAS;YAChBC,GAAG,EAAEC,OAAO,CAACD,GAAG;SACjB,CAAC,CAAC;QAEHL,CAAAA,GAAAA,iBAAS,AAKP,CAAA,UALO,CAAC,CAAC,gBAAgB,CAAC,EAAE;YAC5BC,GAAG,EAAE,GAAG;YACRC,KAAK,EAAEC,CAAAA,GAAAA,cAAmB,AAAE,CAAA,oBAAF,EAAE;YAC5BC,KAAK,EAAE,SAAS;YAChBC,GAAG,EAAEC,OAAO,CAACD,GAAG;SACjB,CAAC,CAAC;KACJ;CACF;kBAxCoBnB,gBAAgB"}